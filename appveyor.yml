os: Visual Studio 2015
platform: x64

install:
  - cmd: echo "Downloading conan..."
  - ps: wget https://s3-eu-west-1.amazonaws.com/conanio-production/downloads/conan-win_0_8_6.exe -OutFile conan_installer.exe
  - cmd: conan_installer.exe /VERYSILENT
  - cmd: set PATH=%PATH%;c:\Program Files (x86)\Conan\conan
  - choco install opencv -version 2.4.9.20140518
  - set QTDIR=c:\Qt\5.6\msvc2015_64
  - set PATH=%PATH%;%QTDIR%\bin

build_script:
  - conan install Boost/1.60.0@lasote/stable -s arch="x86_64" -s build_type="Release" -s compiler="Visual Studio" -s compiler.runtime="MD" -s compiler.version="14" -s os="Windows" -o shared="True" 
  - conan install VTK/7.0.0@bilke/stable -s arch="x86_64" -s build_type="Release" -s compiler="Visual Studio" -s compiler.runtime="MD" -s compiler.version="14" -s os="Windows" -o shared="False" 
  - cd %APPVEYOR_BUILD_FOLDER%
  - mkdir build
  - cd build
  - cmake -G "Visual Studio 12" -DOpenCV_DIR=c:/OpenCV249/opencv/build ..
  - cmake --build .
